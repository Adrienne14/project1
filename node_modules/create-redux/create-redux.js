#!/usr/bin/env node
const fs=require('fs');

fs.mkdir(process.cwd()+'/src/action',(err)=>{
    if(err){
        console.error(err)
    }else {
        fs.writeFile(process.cwd()+'/src/action/action.js',(err)=>{
            if(err){
                console.error(err)
            }else {
                console.log('action创建成功')
            }
        });
    }
});

fs.mkdir(process.cwd()+'/src/containers',(err)=>{
    if(err){
        console.error(err)
    }else {
        console.log('containers创建成功')
    }
});

fs.mkdir(process.cwd()+'/src/component',(err)=>{
    if(err){
        console.error(err)
    }else {
        console.log('component创建成功')
    }
});

fs.mkdir(process.cwd()+'/src/reducer',(err)=>{
    if(err){
        console.error(err)
    }else {
        fs.writeFile(process.cwd()+'/src/reducer/reducer.js','import {combineReducers} from \'redux\'',(err)=>{
            if(err){
                console.error(err)
            }else{
                console.log('reducer创建成功')
            }
        });
    }
});

const store='import { createStore } from "redux";\n' +
    'import {Reducer} from "./reducers/reducer";\n' +
    '\n' +
    'let store=createStore(Reducer);\n' +
    'export default store';

fs.writeFile(process.cwd()+'/src/store.js',store,(err)=>{
    if(err){
        console.error(err)
    }else {
        console.log('store创建成功')
    }
});

const index='import React from \'react\';\n' +
    'import ReactDOM from \'react-dom\';\n' +
    'import { Provider } from \'react-redux\';\n' +
    'import store from \'./store\';\n' +
    'import App from \'./containers/App\'\n' +
    '\n' +
    '\n' +
    'ReactDOM.render(\n' +
    '    <Provider store={store}>\n' +
    '        <App />\n' +
    '    </Provider>, document.getElementById(\'root\'));';

fs.writeFile(process.cwd()+'/src/index.js',index,(err)=>{
    if(err){
        console.error(err)
    }else {
        console.log('index创建成功')
    }
});

